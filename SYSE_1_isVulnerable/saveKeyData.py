#!/usr/bin/env python
# coding: utf-8

import os
import pickle

def saveKeyData(traindataSet_path):
    """
        Saves key data used to fit the BGRU model.
        Uses binary labels.
        traindataSet_path := Balanced Final Train & Test Final sets in ./data/DLvectors/
    """
    for filename in os.listdir(traindataSet_path):
        if filename.endswith(".pkl"):
            f = open(os.path.join(traindataSet_path, filename),"rb")
            print("Save metadata from filename: " + filename)
            data = pickle.load(f)
            ids = data[-1]
            mytype = data[4]
            label1 = data[1]
            print(ids[:20], "\n")
            print(label1[:20], "\n")
            print(mytype[:20], "\n") 
            metadata = "caseID, realLabel, vType \n" 
            for i in range (len(ids)):
                mystr = "{},{},{}\n".format(ids[i],label1[i],mytype[i])
                metadata = metadata + mystr
            fp = open("KeyData_" + filename + ".txt", "w", encoding="utf-8")
            fp.write(metadata)
            fp.close()
            
